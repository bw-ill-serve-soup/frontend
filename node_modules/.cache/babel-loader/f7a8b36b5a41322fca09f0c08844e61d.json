{"ast":null,"code":"import _slicedToArray from \"/Users/masonkarsevar/lambda-school/lambda-week13/frontend/iss-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/masonkarsevar/lambda-school/lambda-week13/frontend/iss-frontend/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport NavBar from './components/NavBar';\nimport DevLogin from './components/DevLogin';\nimport DevSignup from './components/DevSignup'; // import InventoryList from './components/InventoryList';\n\nimport './App.css';\nimport { axiosWithAuth } from './Auth/axiosWithAuth.js';\nimport AddItemForm from './components/AddItemForm/AddItemForm.js';\nimport InventoryList from './components/inventoryList';\nimport EditForm from './components/EditForm';\nimport { getInventory } from './Actions';\n\nfunction App(props) {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        inventoryArray = _useState2[0],\n        setInventoryArray = _useState2[1];\n\n  useEffect(() => {\n    props.getInventory();\n  }, []); // State to display 'Success Message' on the AddItem form when post request is successful\n\n  const _useState3 = useState('message-hide'),\n        _useState4 = _slicedToArray(_useState3, 2),\n        addMessage = _useState4[0],\n        setAddMessage = _useState4[1]; // Function to use in successful post request to hide 'Success' message after 3 seconds\n\n\n  const messageReset = () => {\n    setAddMessage('message-hide');\n  };\n\n  const addItem = item => {\n    console.log('you have added an inventory item', item);\n    axiosWithAuth().post('https://soupkitchen-buildweek.herokuapp.com/kitchen/inventory', item).then(res => {\n      console.log(res.data.userInventory);\n      setInventoryArray([...res.data.userInventory]);\n      console.log(res); // need to update state\n\n      setAddMessage('message-display');\n      setTimeout(messageReset, 3000);\n    }).catch(error => {\n      console.log('There was an error', error);\n    });\n  };\n\n  const editItem = item => {\n    console.log('item that is being edited', item);\n    axiosWithAuth().put(\"https://soupkitchen-buildweek.herokuapp.com/kitchen/inventory\", item).then(res => {\n      console.log(res);\n      const mutateArray = [...inventoryArray];\n\n      for (let i = 0; i < inventoryArray.length; i++) {\n        if (item.id === mutateArray[i].id) {\n          mutateArray[i].quantity = item.quantity;\n          mutateArray[i].weightUnit = item.weightUnit;\n          mutateArray[i].inventoryItem = item.inventoryItem;\n        }\n      }\n\n      setInventoryArray(mutateArray); // messageReset()\n\n      setAddMessage('message-display');\n      setTimeout(messageReset, 3000);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const deleteItem = item => {\n    console.log('item that is being deleted', item);\n    const object = {\n      id: item.id\n    };\n    axiosWithAuth().delete(\"https://soupkitchen-buildweek.herokuapp.com/kitchen/inventory/\".concat(item.id)).then(res => {\n      console.log(res);\n      setInventoryArray([...inventoryArray.filter(inventory => inventory.id !== item.id)]);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  return (// <Route>\n    React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, console.log(props.inventory), React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: props => {\n        return localStorage.getItem('token') ? React.createElement(InventoryList, Object.assign({}, props, {\n          inventoryArray: props.inventory,\n          deleteItem: deleteItem,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        })) : React.createElement(Redirect, {\n          to: \"/login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }))\n  );\n}\n\nconst mapStateToProps = state => ({\n  inventory: state.inventory\n});\n\nexport default connect(mapStateToProps, {\n  getInventory\n})(App);","map":{"version":3,"sources":["/Users/masonkarsevar/lambda-school/lambda-week13/frontend/iss-frontend/src/App.js"],"names":["React","useState","useEffect","Route","Redirect","connect","NavBar","DevLogin","DevSignup","axiosWithAuth","AddItemForm","InventoryList","EditForm","getInventory","App","props","inventoryArray","setInventoryArray","addMessage","setAddMessage","messageReset","addItem","item","console","log","post","then","res","data","userInventory","setTimeout","catch","error","editItem","put","mutateArray","i","length","id","quantity","weightUnit","inventoryItem","err","deleteItem","object","delete","filter","inventory","localStorage","getItem","mapStateToProps","state"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAAQC,KAAR,EAAeC,QAAf,QAA8B,kBAA9B;AACA,SAAQC,OAAR,QAAsB,aAAtB;AAEA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,SAAP,MAAsB,wBAAtB,C,CACA;;AAEA,OAAO,WAAP;AACA,SAASC,aAAT,QAA8B,yBAA9B;AACA,OAAOC,WAAP,MAAwB,yCAAxB;AACA,OAAOC,aAAP,MAA0B,4BAA1B;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,SAAQC,YAAR,QAA2B,WAA3B;;AAEA,SAASC,GAAT,CAAaC,KAAb,EAAoB;AAAA,oBAE0Bd,QAAQ,CAAC,EAAD,CAFlC;AAAA;AAAA,QAEXe,cAFW;AAAA,QAEKC,iBAFL;;AAIlBf,EAAAA,SAAS,CAAC,MAAM;AACda,IAAAA,KAAK,CAACF,YAAN;AACD,GAFQ,EAEN,EAFM,CAAT,CAJkB,CAOlB;;AAPkB,qBASkBZ,QAAQ,CAAC,cAAD,CAT1B;AAAA;AAAA,QASXiB,UATW;AAAA,QASCC,aATD,kBAWlB;;;AAEA,QAAMC,YAAY,GAAG,MAAM;AACzBD,IAAAA,aAAa,CAAC,cAAD,CAAb;AACD,GAFD;;AAIA,QAAME,OAAO,GAAIC,IAAD,IAAU;AACxBC,IAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ,EAAgDF,IAAhD;AACAb,IAAAA,aAAa,GAAGgB,IAAhB,CAAqB,+DAArB,EAAsFH,IAAtF,EACGI,IADH,CACQC,GAAG,IAAI;AACXJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,GAAG,CAACC,IAAJ,CAASC,aAArB;AACAZ,MAAAA,iBAAiB,CAAC,CAChB,GAAGU,GAAG,CAACC,IAAJ,CAASC,aADI,CAAD,CAAjB;AAGAN,MAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ,EALW,CAMX;;AAEAR,MAAAA,aAAa,CAAC,iBAAD,CAAb;AACAW,MAAAA,UAAU,CAACV,YAAD,EAAe,IAAf,CAAV;AAED,KAZH,EAaGW,KAbH,CAaSC,KAAK,IAAI;AACdT,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCQ,KAAlC;AAKD,KAnBH;AAoBD,GAtBD;;AAwBA,QAAMC,QAAQ,GAAIX,IAAD,IAAU;AACzBC,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCF,IAAzC;AACAb,IAAAA,aAAa,GACVyB,GADH,kEACwEZ,IADxE,EAEGI,IAFH,CAEQC,GAAG,IAAI;AACXJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACA,YAAMQ,WAAW,GAAG,CAAC,GAAGnB,cAAJ,CAApB;;AACA,WAAK,IAAIoB,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAGpB,cAAc,CAACqB,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC5C,YAAId,IAAI,CAACgB,EAAL,KAAYH,WAAW,CAACC,CAAD,CAAX,CAAeE,EAA/B,EAAmC;AACjCH,UAAAA,WAAW,CAACC,CAAD,CAAX,CAAeG,QAAf,GAA0BjB,IAAI,CAACiB,QAA/B;AACAJ,UAAAA,WAAW,CAACC,CAAD,CAAX,CAAeI,UAAf,GAA4BlB,IAAI,CAACkB,UAAjC;AACAL,UAAAA,WAAW,CAACC,CAAD,CAAX,CAAeK,aAAf,GAA+BnB,IAAI,CAACmB,aAApC;AACD;AACF;;AACDxB,MAAAA,iBAAiB,CAACkB,WAAD,CAAjB,CAVW,CAYX;;AACAhB,MAAAA,aAAa,CAAC,iBAAD,CAAb;AACAW,MAAAA,UAAU,CAACV,YAAD,EAAe,IAAf,CAAV;AACD,KAjBH,EAkBGW,KAlBH,CAkBSW,GAAG,IAAI;AACZnB,MAAAA,OAAO,CAACC,GAAR,CAAYkB,GAAZ;AACD,KApBH;AAqBD,GAvBD;;AAyBA,QAAMC,UAAU,GAAIrB,IAAD,IAAU;AAC3BC,IAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0CF,IAA1C;AACA,UAAMsB,MAAM,GAAG;AAACN,MAAAA,EAAE,EAAEhB,IAAI,CAACgB;AAAV,KAAf;AAEA7B,IAAAA,aAAa,GACVoC,MADH,yEAC2EvB,IAAI,CAACgB,EADhF,GAEGZ,IAFH,CAEQC,GAAG,IAAI;AACXJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACAV,MAAAA,iBAAiB,CAAC,CAChB,GAAGD,cAAc,CAAC8B,MAAf,CAAsBC,SAAS,IAAIA,SAAS,CAACT,EAAV,KAAiBhB,IAAI,CAACgB,EAAzD,CADa,CAAD,CAAjB;AAGD,KAPH,EAQGP,KARH,CAQSW,GAAG,IAAI;AACZnB,MAAAA,OAAO,CAACC,GAAR,CAAYkB,GAAZ;AACD,KAVH;AAWD,GAfD;;AAkBA,SACE;AACA;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGnB,OAAO,CAACC,GAAR,CAAYT,KAAK,CAACgC,SAAlB,CADH,EAaE,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAC,GAAlB;AAAsB,MAAA,MAAM,EAAEhC,KAAK,IAAI;AACrC,eAAOiC,YAAY,CAACC,OAAb,CAAqB,OAArB,IACD,oBAAC,aAAD,oBAAmBlC,KAAnB;AAA0B,UAAA,cAAc,EAAEA,KAAK,CAACgC,SAAhD;AAA2D,UAAA,UAAU,EAAEJ,UAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADC,GAGD,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAHN;AAKD,OAND;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbF;AAFF;AAoCD;;AAED,MAAMO,eAAe,GAAGC,KAAK,KAAK;AAChCJ,EAAAA,SAAS,EAAEI,KAAK,CAACJ;AADe,CAAL,CAA7B;;AAIA,eAAe1C,OAAO,CACpB6C,eADoB,EAEpB;AAACrC,EAAAA;AAAD,CAFoB,CAAP,CAGbC,GAHa,CAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {Route, Redirect} from 'react-router-dom';\nimport {connect} from 'react-redux';\n\nimport NavBar from './components/NavBar';\nimport DevLogin from './components/DevLogin';\nimport DevSignup from './components/DevSignup';\n// import InventoryList from './components/InventoryList';\n\nimport './App.css';\nimport { axiosWithAuth } from './Auth/axiosWithAuth.js';\nimport AddItemForm from './components/AddItemForm/AddItemForm.js';\nimport InventoryList from './components/inventoryList';\nimport EditForm from './components/EditForm';\nimport {getInventory} from './Actions';\n\nfunction App(props) {\n\n  const [inventoryArray, setInventoryArray] = useState([]);\n\n  useEffect(() => {\n    props.getInventory()\n  }, []);\n  // State to display 'Success Message' on the AddItem form when post request is successful\n\n  const [addMessage, setAddMessage] = useState('message-hide');\n\n  // Function to use in successful post request to hide 'Success' message after 3 seconds\n\n  const messageReset = () => {\n    setAddMessage('message-hide');\n  }\n\n  const addItem = (item) => {\n    console.log('you have added an inventory item', item);\n    axiosWithAuth().post('https://soupkitchen-buildweek.herokuapp.com/kitchen/inventory', item)\n      .then(res => {\n        console.log(res.data.userInventory);\n        setInventoryArray([\n          ...res.data.userInventory\n        ])\n        console.log(res);\n        // need to update state\n        \n        setAddMessage('message-display');\n        setTimeout(messageReset, 3000);\n        \n      })\n      .catch(error => {\n        console.log('There was an error', error)\n        \n        \n        \n\n      })\n  };\n  \n  const editItem = (item) => {\n    console.log('item that is being edited', item);\n    axiosWithAuth()\n      .put(`https://soupkitchen-buildweek.herokuapp.com/kitchen/inventory`, item)\n      .then(res => {\n        console.log(res)\n        const mutateArray = [...inventoryArray]\n        for (let i=0; i < inventoryArray.length; i++) {\n          if (item.id === mutateArray[i].id) {\n            mutateArray[i].quantity = item.quantity;\n            mutateArray[i].weightUnit = item.weightUnit;\n            mutateArray[i].inventoryItem = item.inventoryItem;\n          }\n        }\n        setInventoryArray(mutateArray);\n\n        // messageReset()\n        setAddMessage('message-display');\n        setTimeout(messageReset, 3000);\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n\n  const deleteItem = (item) => {\n    console.log('item that is being deleted', item)\n    const object = {id: item.id};\n    \n    axiosWithAuth()\n      .delete(`https://soupkitchen-buildweek.herokuapp.com/kitchen/inventory/${item.id}`)\n      .then(res => {\n        console.log(res)\n        setInventoryArray([\n          ...inventoryArray.filter(inventory => inventory.id !== item.id)\n        ])\n      })\n      .catch(err => {\n        console.log(err) \n      })\n  }\n\n        \n  return (\n    // <Route>\n    <div className=\"App\">\n      {console.log(props.inventory)}\n      {/* <NavBar />\n      <Route path='/add_item' render={props => {\n        return localStorage.getItem('token') ? (\n              <AddItemForm {...props} addItem={addItem} messageStatus={addMessage}/>\n          ) : (\n              <Redirect to='/login' /> \n          )\n      }} /> */}\n      \n\n      \n      <Route exact path='/' render={props => {\n        return localStorage.getItem('token') ? (\n              <InventoryList {...props} inventoryArray={props.inventory} deleteItem={deleteItem} />\n          ) : (\n              <Redirect to='/login' /> \n          )\n      }} />\n      {/* <Route path='/login' component={DevLogin} />\n      <Route path='/signup' component={DevSignup} />\n      <Route path='/edit-item/:id' render={props => {\n        const targetInventory = inventoryArray.find(inventory => inventory.id.toString() === props.match.params.id)\n        return <EditForm {...props} editItem={editItem} initialCard={targetInventory} messageStatus={addMessage} />\n      }} /> */}\n\n  \n\n\n      {/* <InventoryList /> */}\n      {/* <Login/> */}\n    </div>\n  );\n}\n\nconst mapStateToProps = state => ({\n  inventory: state.inventory\n})\n\nexport default connect(\n  mapStateToProps, \n  {getInventory}\n)(App);\n\n\n"]},"metadata":{},"sourceType":"module"}